<!DOCTYPE html>
<html>
<head>
    <title>ä¼˜å±…èµ„ç®¡ | å•†é“ºæ”¶ç›Šæµ‹ç®—å™¨</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* æ ·å¼ä»£ç  - ç®€æ´ä¸“ä¸šçš„UI */
        body { font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif; }
        .container { max-width: 800px; margin: 0 auto; padding: 20px; }
        .input-group { margin: 20px 0; }
        .result-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        .number-a { color: #ff6b6b; font-size: 28px; font-weight: bold; }
        .number-b { color: #51cf66; font-size: 28px; font-weight: bold; }
        .btn-calculate {
            background: linear-gradient(to right, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 18px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” æ‚¨çš„å•†é“ºå€¼å¤šå°‘é’±ï¼Ÿ</h1>
        <p>å¡«å†™åŸºæœ¬ä¿¡æ¯ï¼Œç«‹å³æµ‹ç®—ä¸¤ç§æ¨¡å¼ä¸‹çš„3å¹´æ”¶ç›Šå¯¹æ¯”</p>

        <!-- è¾“å…¥è¡¨å• -->
        <div class="input-group">
            <label>å•†é“ºé¢ç§¯ï¼ˆã¡ï¼‰</label>
            <input type="number" id="area" placeholder="ä¾‹å¦‚ï¼š100" min="20" max="1000">
        </div>

        <div class="input-group">
            <label>æ‰€åœ¨å•†åœˆ</label>
            <select id="location">
                <option value="1.3">æ ¸å¿ƒå•†åœˆï¼ˆå•†åœºã€æ­¥è¡Œè¡—ï¼‰</option>
                <option value="1.0">åŒºåŸŸå•†åœˆï¼ˆç¤¾åŒºå•†ä¸šè¡—ï¼‰</option>
                <option value="0.8">ç¤¾åŒºåº•å•†</option>
            </select>
        </div>

        <div class="input-group">
            <label>å•†é“ºçŠ¶å†µ</label>
            <select id="condition">
                <option value="1.2">ç²¾è£…ä¿®ï¼Œå¯ç›´æ¥ä½¿ç”¨</option>
                <option value="1.0">æ™®é€šè£…ä¿®ï¼Œéœ€ç®€å•æ•´ç†</option>
                <option value="0.8">æ¯›å¯æˆ–éœ€å¤§ä¿®</option>
            </select>
        </div>

        <div class="input-group">
            <label>å½“å‰ç§Ÿé‡‘ï¼ˆå…ƒ/æœˆï¼‰</label>
            <input type="number" id="currentRent" placeholder="å¡«å†™å½“å‰æœˆç§Ÿé‡‘">
            <small>å¦‚ä¸ç¡®å®šï¼Œå¯ä¸å¡«ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¼°ç®—</small>
        </div>

        <button class="btn-calculate" onclick="calculate()">ç«‹å³æµ‹ç®—</button>

        <!-- ç»“æœå±•ç¤ºåŒºåŸŸ -->
        <div id="resultSection" style="display:none;">
            <div class="result-card">
                <h2>ğŸ“Š æµ‹ç®—ç»“æœ</h2>

                <div style="margin: 25px 0;">
                    <h3>å¸‚åœºè¯„ä¼°æœˆç§Ÿé‡‘ï¼š<span id="marketRent">--</span> å…ƒ</h3>
                    <small>åŸºäºæ‚¨æä¾›çš„ä¿¡æ¯å’Œå¤§æ•°æ®è¯„ä¼°</small>
                </div>

                <div style="display: flex; justify-content: space-between; margin: 30px 0;">
                    <div style="text-align: center;">
                        <h4>è‡ªè¥æ¨¡å¼</h4>
                        <div class="number-a" id="numberA">--</div>
                        <small>æœªæ¥3å¹´é¢„æœŸæ€»æ”¶ç›Š</small>
                        <div style="margin-top: 15px; color: #666; font-size: 14px;">
                            <div>âœ“ ç†è®ºå³°å€¼å¯èƒ½æ›´é«˜</div>
                            <div>âœ— éœ€æ‰¿æ‹…ç©ºç½®é£é™©</div>
                            <div>âœ— éœ€æŠ•å…¥ç®¡ç†ç²¾åŠ›</div>
                        </div>
                    </div>

                    <div style="text-align: center;">
                        <h4>æ‰˜ç®¡æ¨¡å¼</h4>
                        <div class="number-b" id="numberB">--</div>
                        <small>æœªæ¥3å¹´ç¡®å®šæ€»æ”¶ç›Š</small>
                        <div style="margin-top: 15px; color: #666; font-size: 14px;">
                            <div>âœ“ æ”¶ç›Š100%ç¡®å®š</div>
                            <div>âœ“ é›¶ç©ºç½®é£é™©</div>
                            <div>âœ“ å½»åº•è§£æ”¾ç²¾åŠ›</div>
                        </div>
                    </div>
                </div>

                <div style="background: white; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <h4>ğŸ† æ‰˜ç®¡ä¼˜åŠ¿</h4>
                    <p>é€‰æ‹©æ‰˜ç®¡ï¼Œæ‚¨å°†ï¼š</p>
                    <ul>
                        <li>å¤šè·å¾— <strong id="profitDiff">--</strong> å…ƒç¡®å®šæ”¶ç›Š</li>
                        <li>èŠ‚çœè¶…è¿‡ <strong>300å°æ—¶</strong> ç®¡ç†æ—¶é—´</li>
                        <li>æ¶ˆé™¤æ‰€æœ‰ç§Ÿé‡‘æ‹–æ¬ å’Œç©ºç½®é£é™©</li>
                    </ul>
                </div>

                <button onclick="showContact()" style="background: #51cf66; color: white; padding: 15px 30px; border: none; border-radius: 8px; font-size: 16px; cursor: pointer;">
                    ğŸ“ è·å–æˆ‘çš„ä¸“å±æ‰˜ç®¡æ–¹æ¡ˆ
                </button>
            </div>
        </div>

        <!-- è”ç³»è¡¨å• -->
        <div id="contactForm" style="display:none; margin-top: 40px;">
            <h3>ç•™ä¸‹è”ç³»æ–¹å¼ï¼Œèµ„äº§é¡¾é—®å°†åœ¨24å°æ—¶å†…è”ç³»æ‚¨</h3>
            <input type="text" id="userName" placeholder="æ‚¨çš„å§“å" style="width: 100%; padding: 12px; margin: 10px 0;">
            <input type="tel" id="userPhone" placeholder="æ‰‹æœºå·ç " style="width: 100%; padding: 12px; margin: 10px 0;">
            <button onclick="submitForm()" style="background: #3498db; color: white; padding: 15px 40px; border: none; border-radius: 8px; font-size: 16px; cursor: pointer;">æäº¤é¢„çº¦</button>
        </div>
    </div>

    <script>
    // åŸå¸‚åŸºç¡€ç§Ÿé‡‘å•ä»·ï¼ˆå…ƒ/ã¡/å¤©ï¼‰ï¼Œè¿™é‡Œä»¥äºŒçº¿åŸå¸‚ä¸ºä¾‹
    const cityBaseRent = {
        'ä¸€çº¿åŸå¸‚': 3.5,
        'äºŒçº¿åŸå¸‚': 2.8,
        'ä¸‰çº¿åŸå¸‚': 2.0
    };

    // é€‰æ‹©çš„åŸå¸‚ï¼ˆå¯åœ¨é¡µé¢å¢åŠ åŸå¸‚é€‰æ‹©ï¼‰
    let selectedCity = 'äºŒçº¿åŸå¸‚';
    let baseRentPerSquare = cityBaseRent[selectedCity];

    function calculate() {
        // è·å–è¾“å…¥å€¼
        const area = parseFloat(document.getElementById('area').value);
        const locationCoefficient = parseFloat(document.getElementById('location').value);
        const conditionCoefficient = parseFloat(document.getElementById('condition').value);
        const currentRent = document.getElementById('currentRent').value ?
            parseFloat(document.getElementById('currentRent').value) : null;

        if (!area) {
            alert('è¯·è¾“å…¥å•†é“ºé¢ç§¯');
            return;
        }

        // è®¡ç®—å¸‚åœºå‚è€ƒæœˆç§Ÿé‡‘
        let marketMonthlyRent;
        if (currentRent) {
            // å¦‚æœç”¨æˆ·å¡«å†™äº†å½“å‰ç§Ÿé‡‘ï¼Œä»¥æ­¤ä¸ºåŸºå‡†
            marketMonthlyRent = currentRent;
        } else {
            // å¦åˆ™æ ¹æ®ç®—æ³•è®¡ç®—
            marketMonthlyRent = area * baseRentPerSquare * 30 * locationCoefficient * conditionCoefficient;
        }

        // æ•°å­—Aè®¡ç®—ï¼ˆè‡ªä¸»ç»è¥ï¼‰
        const vacancyLossMonths = 1.8; // å¹´ç©ºç½®æœˆæ•°
        const managementCostMonths = 0.5; // ç®¡ç†æˆæœ¬ï¼ˆæœˆç§Ÿé‡‘å€æ•°ï¼‰
        const riskReserveMonths = 1.0; // é£é™©å‡†å¤‡é‡‘
        const annualGrowth = 0.03; // å¹´å¢é•¿ç‡

        let year1Net = marketMonthlyRent * (12 - vacancyLossMonths - managementCostMonths - riskReserveMonths);
        let year2Net = year1Net * (1 + annualGrowth);
        let year3Net = year2Net * (1 + annualGrowth);
        let numberA = year1Net + year2Net + year3Net;

        // æ•°å­—Bè®¡ç®—ï¼ˆå…¨æ‰˜ç®¡ï¼‰
        const managedRentRatio = 0.93; // æ‰˜ç®¡ç§Ÿé‡‘ç³»æ•°
        const managedMonthlyRent = marketMonthlyRent * managedRentRatio;
        const annualIncrement = 0.03; // å¹´é€’å¢ç‡

        let year1Managed = managedMonthlyRent * 12;
        let year2Managed = year1Managed * (1 + annualIncrement);
        let year3Managed = year2Managed * (1 + annualIncrement);
        let numberB = year1Managed + year2Managed + year3Managed;

        // æ›´æ–°é¡µé¢æ˜¾ç¤º
        document.getElementById('marketRent').textContent = Math.round(marketMonthlyRent).toLocaleString();
        document.getElementById('numberA').textContent = Math.round(numberA).toLocaleString() + 'å…ƒ';
        document.getElementById('numberB').textContent = Math.round(numberB).toLocaleString() + 'å…ƒ';

        const profitDiff = Math.round(numberB - numberA);
        const profitDiffElement = document.getElementById('profitDiff');
        profitDiffElement.textContent = Math.abs(profitDiff).toLocaleString();
        profitDiffElement.style.color = profitDiff >= 0 ? '#51cf66' : '#ff6b6b';

        // æ˜¾ç¤ºç»“æœåŒºåŸŸ
        document.getElementById('resultSection').style.display = 'block';

        // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
        document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });

        // å‘é€æ•°æ®åˆ°åå°ï¼ˆå¯é€‰ï¼‰
        sendCalculationData({
            area, locationCoefficient, conditionCoefficient,
            marketMonthlyRent, numberA, numberB
        });
    }

    function showContact() {
        document.getElementById('contactForm').style.display = 'block';
        document.getElementById('contactForm').scrollIntoView({ behavior: 'smooth' });
    }

    function submitForm() {
        const name = document.getElementById('userName').value;
        const phone = document.getElementById('userPhone').value;

        if (!name || !phone) {
            alert('è¯·å¡«å†™å§“åå’Œæ‰‹æœºå·ç ');
            return;
        }

        // å‘é€è¡¨å•æ•°æ®åˆ°åå°
        sendContactInfo({ name, phone });

        // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
        alert('æäº¤æˆåŠŸï¼èµ„äº§é¡¾é—®å°†åœ¨24å°æ—¶å†…è”ç³»æ‚¨ã€‚');

        // æ¸…ç©ºè¡¨å•
        document.getElementById('userName').value = '';
        document.getElementById('userPhone').value = '';
    }

    // å‘é€è®¡ç®—æ•°æ®åˆ°åå°ï¼ˆç¤ºä¾‹ï¼‰
    function sendCalculationData(data) {
        // è¿™é‡Œå¯ä»¥æ·»åŠ å‘é€åˆ°æœåŠ¡å™¨çš„ä»£ç 
        console.log('è®¡ç®—æ•°æ®:', data);
        // fetch('/api/calculation', { method: 'POST', body: JSON.stringify(data) })
    }

    function sendContactInfo(data) {
        // è¿™é‡Œå¯ä»¥æ·»åŠ å‘é€åˆ°æœåŠ¡å™¨çš„ä»£ç 
        console.log('è”ç³»ä¿¡æ¯:', data);
        // fetch('/api/contact', { method: 'POST', body: JSON.stringify(data) })
    }
    </script>
</body>
</html>